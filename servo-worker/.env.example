# Servo Worker - Local Development Configuration
# Copy this file to .env and customize for your environment
# NOTE: This file is for LOCAL DEVELOPMENT ONLY
# In production, use GCP Secret Manager for sensitive values

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL connection string
DATABASE_URL=postgresql://servo:servo@localhost:5432/servo_dev

# =============================================================================
# Server Configuration
# =============================================================================

# HTTP port (default: 8080)
PORT=8080

# Workflow execution timeout in seconds (default: 600)
EXECUTION_TIMEOUT=600

# =============================================================================
# Security - HMAC Secret
# =============================================================================

# HMAC secret for request signature verification (min 32 bytes)
# In production, this comes from GCP Secret Manager
# Generate a strong secret: openssl rand -base64 48
SERVO_HMAC_SECRET=local-development-secret-change-me-minimum-32-bytes-required

# =============================================================================
# OIDC Configuration
# =============================================================================

# Disable OIDC validation for local development
OIDC_ENABLE_VALIDATION=false

# For production, enable and configure:
# OIDC_ENABLE_VALIDATION=true
# OIDC_ISSUER=https://accounts.google.com
# OIDC_EXPECTED_AUDIENCE=https://your-worker-url.run.app

# =============================================================================
# Rate Limiting
# =============================================================================

# Tenant rate limit (requests per second)
SERVO_RATE_LIMIT_TENANT_RPS=100

# Metrics endpoint rate limit (requests per minute per IP)
SERVO_RATE_LIMIT_METRICS_RPM=600

# =============================================================================
# Observability - Tracing
# =============================================================================

# Disable tracing for local development
SERVO_TRACE_ENABLED=false

# For production, enable and configure:
# SERVO_TRACE_ENABLED=true
# SERVO_TRACE_ENDPOINT=http://localhost:4317
# SERVO_TRACE_SAMPLE_RATE=1.0

# Environment name (for logs and metrics)
SERVO_ENVIRONMENT=development

# =============================================================================
# Logging
# =============================================================================

# Log level (trace, debug, info, warn, error)
RUST_LOG=servo_worker=debug,info

# =============================================================================
# GCP Configuration (for Secret Manager - optional for local dev)
# =============================================================================

# Uncomment to test Secret Manager locally:
# GCP_PROJECT_ID=your-project-id
# GCP_SECRET_NAME=servo-hmac-secret
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# =============================================================================
# Metrics Token (optional)
# =============================================================================

# If set, metrics endpoint requires Bearer token authentication
# SERVO_METRICS_TOKEN=your-metrics-token
